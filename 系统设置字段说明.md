# 系统设置字段说明

## 当前字段

### 1. 商家名称（merchantName）

**作用：**
- 用于标识不同商家的商品数据
- 在多商家场景下区分不同商家
- 便于管理和查询特定商家的商品

**使用场景：**
- 如果系统需要支持多个商家，每个商家可以有自己的商品库
- 商品数据会关联到对应的商家ID和商家名称
- 目前系统默认使用商家ID为1，商家名称为"默认商家"

**限制：**
- 最大长度：100个字符

---

### 2. 默认类目ID（templateConfig字段）

**界面显示：**
- 标签：默认类目ID
- 提示：设置默认的商品类目ID，导入时如果没有类目ID将使用此默认值
- 示例：2000010001

**实际情况：**
⚠️ **注意：** 当前代码实现中，`templateConfig` 字段实际上被用来存储JSON格式的配置信息，而不是简单的类目ID字符串。

**代码中的实际用途：**
```java
// 在 MerchantConfig.java 中
private String templateConfig;  // 存储JSON格式的配置

// 默认值为空JSON对象
public MerchantConfig() {
    this.templateConfig = "{}";
}
```

**存在的问题：**
1. 界面提示说是"默认类目ID"，但实际存储的是JSON配置
2. 用户输入的类目ID（如"2000010001"）会被当作JSON解析，可能导致错误
3. 代码中没有实际使用这个字段作为默认类目ID的逻辑

---

## 建议的解决方案

### 方案1：修正字段用途（推荐）

将 `templateConfig` 字段改为真正的默认类目ID：

1. **数据库层面：**
   - 保持字段名为 `template_config` 或改为 `default_category_id`
   - 字段类型：VARCHAR(50)

2. **后端代码：**
   ```java
   // 在 MerchantConfig.java 中
   private String defaultCategoryId;  // 默认类目ID
   ```

3. **导入逻辑：**
   ```java
   // 在导入商品时
   if (product.getCategoryId() == null || product.getCategoryId().isEmpty()) {
       // 从系统设置中获取默认类目ID
       MerchantConfig config = settingsService.getConfig(merchantId);
       product.setCategoryId(config.getDefaultCategoryId());
   }
   ```

### 方案2：添加新字段

保留 `templateConfig` 用于其他配置，新增专门的默认类目ID字段：

1. **数据库：**
   ```sql
   ALTER TABLE t_merchant_config 
   ADD COLUMN default_category_id VARCHAR(50) COMMENT '默认类目ID';
   ```

2. **实体类：**
   ```java
   private String defaultCategoryId;  // 默认类目ID
   ```

3. **前端界面：**
   - 保持当前的"默认类目ID"输入框
   - 绑定到新的 `defaultCategoryId` 字段

---

## 当前系统的实际配置

**商家配置表（t_merchant_config）：**
- `merchant_id`: 商家ID（默认为1）
- `merchant_name`: 商家名称（默认为"默认商家"）
- `template_config`: 模板配置（当前存储JSON，默认为"{}"）
- `meituan_app_key`: 美团AppKey
- `meituan_app_secret`: 美团AppSecret
- `access_token`: 访问令牌

**建议：**
如果需要实现"默认类目ID"功能，建议采用方案1或方案2进行修正。

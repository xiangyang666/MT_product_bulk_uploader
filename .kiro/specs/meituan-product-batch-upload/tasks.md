# 实施计划

- [x] 1. 初始化项目结构



  - 创建前端Electron项目（electron + vue3 + vite）
  - 创建后端Spring Boot项目（Spring Boot 3 + MyBatis Plus）
  - 配置项目依赖和构建工具
  - 设置开发环境配置文件



  - _需求：7.3_

- [ ] 2. 设置数据库和数据模型
  - 创建MySQL数据库和表结构（t_product, t_operation_log, t_merchant_config）
  - 实现Product、OperationLog、MerchantConfig实体类
  - 配置MyBatis Plus和数据源
  - _需求：8.1, 8.4_




- [ ]* 2.1 编写属性测试：数据持久化往返
  - **属性 13：数据持久化往返**
  - **验证需求：8.1, 8.3**

- [ ] 3. 实现Excel文件解析功能
  - 创建ExcelService类，使用Apache POI解析xlsx和xls文件
  - 实现商品数据提取和验证逻辑
  - 处理空白行和缺失字段的验证
  - _需求：1.1, 1.2, 1.5_

- [ ]* 3.1 编写属性测试：Excel解析往返一致性
  - **属性 1：Excel解析往返一致性**
  - **验证需求：1.1, 1.2**

- [ ]* 3.2 编写属性测试：无效文件格式拒绝
  - **属性 2：无效文件格式拒绝**
  - **验证需求：1.4**

- [ ]* 3.3 编写属性测试：无效数据行标记
  - **属性 3：无效数据行标记**



  - **验证需求：1.5**

- [ ]* 3.4 编写单元测试：Excel解析边界情况
  - 测试空文件处理
  - 测试超大文件处理
  - 测试特殊字符处理
  - _需求：1.1, 1.2, 1.5_

- [ ] 4. 实现商品数据导入API
  - 创建ProductController和ProductService



  - 实现POST /api/products/import端点
  - 实现批量插入数据库逻辑
  - 返回导入结果（成功数量、失败数量、错误列表）
  - _需求：1.1, 1.2, 1.3, 8.1_

- [ ]* 4.1 编写单元测试：导入API功能
  - 测试有效文件导入
  - 测试无效文件拒绝
  - 测试部分数据失败场景
  - _需求：1.1, 1.2, 1.4, 1.5_

- [ ] 5. 实现美团上传模板生成功能
  - 创建模板配置文件（template-config.json）
  - 实现generateMeituanTemplate方法
  - 根据配置生成符合美团格式的Excel文件
  - 自动填充商品数据到模板
  - _需求：2.1, 2.2, 7.1, 7.2_


- [ ]* 5.1 编写属性测试：模板生成数据完整性
  - **属性 4：模板生成数据完整性**
  - **验证需求：2.1, 2.2**




- [ ]* 5.2 编写属性测试：配置文件驱动模板格式
  - **属性 11：配置文件驱动模板格式**
  - **验证需求：7.2**

- [ ]* 5.3 编写单元测试：模板生成功能
  - 测试空数据集处理
  - 测试模板格式正确性
  - _需求：2.1, 2.2, 2.5_

- [ ] 6. 实现模板生成API
  - 实现POST /api/products/generate-template端点
  - 提供文件下载功能
  - 处理生成失败的错误情况
  - _需求：2.1, 2.2, 2.3, 2.4_



- [ ] 7. 实现美团API集成模块
  - 创建MeituanApiClient类
  - 实现商品批量上传接口调用
  - 实现商品清空接口调用
  - 配置HTTPS通信和访问令牌验证
  - 实现重试机制（指数退避）
  - _需求：3.2, 4.2, 6.2_

- [ ]* 7.1 编写属性测试：HTTPS通信加密
  - **属性 10：HTTPS通信加密**
  - **验证需求：6.1, 6.2**

- [ ]* 7.2 编写单元测试：美团API客户端
  - 使用Mock测试API调用
  - 测试重试机制
  - 测试错误处理
  - _需求：3.2, 4.2_

- [ ] 8. 实现商品批量上传功能
  - 实现ProductService.uploadToMeituan方法


  - 实现数据验证逻辑
  - 实现分批上传（每批500条）
  - 处理部分失败场景，继续上传剩余商品


  - 记录上传结果和失败商品信息
  - _需求：3.1, 3.2, 3.6_

- [ ]* 8.1 编写属性测试：数据验证一致性
  - **属性 6：数据验证一致性**
  - **验证需求：3.1**

- [ ]* 8.2 编写属性测试：部分失败继续处理
  - **属性 7：部分失败继续处理**
  - **验证需求：3.6**

- [ ]* 8.3 编写单元测试：批量上传功能
  - 测试分批上传逻辑



  - 测试全部成功场景
  - 测试全部失败场景
  - _需求：3.1, 3.2, 3.6_

- [ ] 9. 实现批量上传API
  - 实现POST /api/products/upload端点
  - 返回上传结果（总数、成功数、失败数、失败商品列表、耗时）
  - _需求：3.2, 3.4, 3.5_

- [ ] 10. 实现一键清空商品功能
  - 实现ProductService.clearAllProducts方法
  - 调用美团API清空商品
  - 同时清空本地数据库商品数据
  - _需求：4.2_

- [ ]* 10.1 编写属性测试：取消操作数据不变性
  - **属性 9：取消操作数据不变性**
  - **验证需求：4.5**

- [ ]* 10.2 编写单元测试：清空商品功能
  - 测试清空成功场景
  - 测试清空失败场景
  - _需求：4.2, 4.3, 4.4_

- [ ] 11. 实现清空商品API
  - 实现DELETE /api/products/clear端点
  - 返回清空结果（删除数量）
  - _需求：4.2, 4.3, 4.4_

- [ ] 12. 实现操作日志记录功能
  - 创建OperationLogService
  - 在导入、上传、清空操作中记录日志
  - 记录操作类型、成功数量、失败数量、耗时、错误信息
  - _需求：7.4, 8.2_

- [ ]* 12.1 编写属性测试：操作日志记录
  - **属性 12：操作日志记录**
  - **验证需求：7.4, 8.2**

- [ ] 13. 实现全局异常处理
  - 创建GlobalExceptionHandler
  - 处理FileFormatException、DataValidationException、MeituanApiException
  - 统一错误响应格式
  - _需求：1.4, 1.5, 2.4, 3.5, 4.4_

- [ ] 14. 实现安全配置
  - 配置Spring Security
  - 实现JWT认证过滤器
  - 配置HTTPS强制使用
  - 实现访问令牌验证
  - _需求：6.1, 6.2_

- [ ] 15. 检查点 - 确保后端所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [ ] 16. 初始化前端Electron应用
  - 配置Electron主进程和渲染进程
  - 配置Vue 3 + Vite项目结构
  - 安装Element Plus UI组件库
  - 配置Axios HTTP客户端
  - 配置Pinia状态管理
  - _需求：5.4, 7.3_

- [ ] 17. 实现前端API服务层
  - 创建API服务模块（api/product.ts）
  - 封装所有后端API调用（导入、生成模板、上传、清空）
  - 配置Axios拦截器（请求/响应处理、错误处理）
  - 配置HTTPS通信
  - _需求：6.1_

- [ ]* 17.1 编写属性测试：HTTPS通信配置
  - 验证Axios配置使用HTTPS
  - _需求：6.1_

- [ ] 18. 实现文件导入组件（FileImport.vue）
  - 创建文件选择UI
  - 实现文件上传功能
  - 验证文件格式（仅允许xlsx和xls）
  - 显示上传进度和结果
  - _需求：1.1, 1.2, 1.4_

- [ ]* 18.1 编写单元测试：文件导入组件
  - 测试文件选择功能
  - 测试格式验证
  - 测试错误提示
  - _需求：1.1, 1.2, 1.4_

- [ ] 19. 实现商品数据表格组件（ProductTable.vue）
  - 使用Element Plus Table组件展示商品数据
  - 显示商品名称、类目ID、价格、状态等字段
  - 实现虚拟滚动支持大量数据展示
  - _需求：1.3, 5.2_

- [ ]* 19.1 编写属性测试：UI数据展示完整性
  - **属性 5：UI数据展示完整性**
  - **验证需求：1.3, 5.2**

- [ ]* 19.2 编写单元测试：商品表格组件
  - 测试数据渲染
  - 测试空数据处理
  - _需求：1.3, 5.2_

- [ ] 20. 实现模板生成组件（TemplateGenerator.vue）
  - 创建生成模板按钮
  - 显示商品数量统计
  - 实现模板下载功能
  - 处理生成失败的错误提示
  - _需求：2.1, 2.3, 2.4, 2.5_

- [ ]* 20.1 编写单元测试：模板生成组件
  - 测试按钮禁用状态（无数据时）
  - 测试下载功能
  - 测试错误提示
  - _需求：2.3, 2.4, 2.5_

- [ ] 21. 实现批量上传组件（BatchUpload.vue）
  - 创建上传按钮和进度显示
  - 实现批量上传功能
  - 显示上传结果（总数、成功数、失败数）
  - 显示失败商品列表和错误详情
  - _需求：3.2, 3.4, 3.5_

- [ ]* 21.1 编写属性测试：上传结果反馈完整性
  - **属性 8：上传结果反馈完整性**
  - **验证需求：3.4, 3.5**

- [ ]* 21.2 编写单元测试：批量上传组件
  - 测试上传成功场景
  - 测试上传失败场景
  - 测试部分失败场景
  - _需求：3.4, 3.5_

- [ ] 22. 实现一键清空组件（ClearProducts.vue）
  - 创建清空按钮
  - 实现二次确认对话框
  - 处理确认和取消操作
  - 显示清空结果
  - _需求：4.1, 4.3, 4.4, 4.5_

- [ ]* 22.1 编写单元测试：清空商品组件
  - 测试确认对话框显示
  - 测试取消操作
  - 测试清空成功提示
  - 测试清空失败提示
  - _需求：4.1, 4.3, 4.4, 4.5_

- [ ] 23. 实现主窗口和导航
  - 创建MainWindow.vue主框架
  - 实现导航栏（NavigationBar.vue）
  - 集成所有功能组件
  - 实现路由配置
  - _需求：5.4_

- [ ] 24. 实现全局错误处理
  - 配置Axios响应拦截器
  - 实现统一错误提示（使用Element Plus Message）
  - 处理网络错误、认证错误、服务器错误
  - _需求：1.4, 1.5, 2.4, 3.5, 4.4_

- [ ] 25. 实现状态管理
  - 创建Pinia Store（productStore.ts）
  - 管理商品数据状态
  - 管理加载状态和错误状态
  - 实现数据持久化（localStorage）
  - _需求：8.3_

- [ ] 26. 优化应用启动性能
  - 优化Electron主进程启动逻辑
  - 实现懒加载和代码分割
  - 优化资源加载
  - 确保启动时间 ≤ 5秒
  - _需求：5.1_

- [ ] 27. 检查点 - 确保前端所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [ ] 28. 实现前后端集成
  - 配置前端代理连接后端API
  - 测试完整的数据流（导入 → 生成模板 → 上传 → 清空）
  - 验证错误处理和用户反馈
  - _需求：所有需求_

- [ ]* 28.1 编写集成测试：完整工作流
  - 测试导入 → 生成模板 → 上传的完整流程
  - 测试错误场景的端到端处理
  - _需求：所有需求_

- [ ] 29. 实现应用打包配置
  - 配置electron-builder
  - 配置Windows、macOS、Linux打包选项
  - 生成安装包
  - _需求：7.3_

- [ ] 30. 编写部署文档
  - 创建README.md（项目说明、安装步骤、使用指南）
  - 创建后端部署文档（数据库配置、JAR部署）
  - 创建前端打包文档（构建步骤、安装包生成）
  - _需求：7.3_

- [ ] 31. 最终检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

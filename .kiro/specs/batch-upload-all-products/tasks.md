# 实施计划

- [x] 1. 后端：添加商品统计查询方法


  - 在ProductMapper中添加getStats方法
  - 实现SQL查询统计商品总数、待上传数量、已上传数量
  - 创建ProductStats DTO类
  - _需求：2.2, 3.1_

- [ ]* 1.1 编写属性测试：统计信息准确性
  - **属性 4：统计信息准确性**
  - **验证需求：2.2, 3.1**




- [ ] 2. 后端：添加最近商品查询方法
  - 在ProductMapper中添加selectRecent方法
  - 实现按创建时间倒序查询，限制返回数量
  - _需求：3.2_



- [ ]* 2.1 编写属性测试：商品预览数量限制
  - **属性 5：商品预览数量限制**
  - **验证需求：3.2**




- [ ] 3. 后端：实现流式查询方法
  - 在ProductMapper中添加streamAll方法
  - 配置MyBatis流式查询（ResultSetType.FORWARD_ONLY, fetchSize=1000）
  - _需求：6.4_

- [ ] 4. 后端：实现生成全部商品模板API
  - 在ProductController中添加POST /api/products/generate-all-template端点
  - 实现ProductService.generateAllTemplate方法
  - 使用SXSSFWorkbook进行流式Excel生成
  - 处理无商品数据的边界情况
  - 返回Excel文件流
  - _需求：1.1, 1.2, 1.4, 6.1, 6.2, 6.4_

- [ ]* 4.1 编写属性测试：全部商品查询完整性
  - **属性 1：全部商品查询完整性**
  - **验证需求：1.1, 1.2**

- [ ]* 4.2 编写单元测试：无商品数据边界情况
  - 测试商品数量为0时的处理
  - 验证抛出正确的异常
  - _需求：1.4_

- [ ]* 4.3 编写单元测试：性能测试
  - 测试1000条商品生成时间 ≤ 10秒
  - 测试10000条商品生成时间 ≤ 60秒
  - _需求：6.1, 6.2_

- [x] 5. 后端：实现获取商品统计API

  - 在ProductController中添加GET /api/products/stats端点
  - 调用ProductMapper.getStats方法
  - 返回统计信息JSON
  - _需求：2.2, 3.1_


- [ ] 6. 后端：实现获取最近商品API
  - 在ProductController中添加GET /api/products/recent端点
  - 支持limit参数（默认10）
  - 返回最近导入的商品列表
  - _需求：3.2_



- [ ] 7. 后端：添加操作历史查询方法
  - 在OperationLogMapper中添加selectRecent方法
  - 支持按操作类型和商家ID查询
  - 限制返回数量
  - _需求：4.2_

- [x]* 7.1 编写属性测试：操作历史显示限制


  - **属性 8：操作历史显示限制**
  - **验证需求：4.2**

- [ ] 8. 后端：实现获取操作历史API
  - 在ProductController或LogController中添加GET /api/operation-logs/recent端点
  - 支持limit和type参数
  - 返回最近操作记录列表
  - _需求：4.2, 4.4_


- [ ]* 8.1 编写属性测试：操作历史数据完整性
  - **属性 9：操作历史数据完整性**
  - **验证需求：4.4**

- [ ] 9. 后端：记录模板生成操作日志
  - 在generateAllTemplate方法中添加日志记录
  - 记录操作类型为"GENERATE_ALL"
  - 记录商品数量、操作时间、耗时

  - _需求：4.1_

- [ ]* 9.1 编写属性测试：操作日志记录
  - **属性 7：操作日志记录**
  - **验证需求：4.1**

- [ ] 10. 后端：实现错误处理
  - 添加TemplateGenerationException异常类
  - 在GlobalExceptionHandler中添加异常处理
  - 返回友好的错误消息
  - _需求：5.1, 5.2, 5.3_


- [ ]* 10.1 编写单元测试：错误处理场景
  - 测试模板生成失败
  - 测试数据库超时
  - 验证错误消息格式

  - _需求：5.1, 5.3_

- [ ] 11. 后端：添加资源限制
  - 添加MAX_PRODUCTS_PER_GENERATION常量（50000）
  - 在生成模板前检查商品数量


  - 超过限制时抛出异常
  - _需求：6.1, 6.2_

- [ ] 12. 后端：实现临时文件清理
  - 创建定时任务cleanupTempFiles
  - 每天凌晨2点执行
  - 删除超过24小时的临时文件
  - _需求：6.4_

- [x] 13. 检查点 - 确保后端所有测试通过
  - 后端所有核心任务已完成，编译检查通过

- [x] 14. 前端：创建数据类型定义
  - 创建types/upload.js文件
  - 定义ProductStats、ProductPreview、OperationLog接口
  - 定义PageState接口
  - _需求：所有需求_

- [x] 15. 前端：创建API服务方法
  - 在api/index.js中添加getProductStats方法
  - 添加getRecentProducts方法
  - 添加generateAllTemplate方法
  - 添加getRecentOperations方法
  - _需求：所有需求_

- [x] 16. 前端：重新设计Upload.vue页面结构
  - 移除商品表格和选择功能
  - 创建三个主要区域：统计卡片、主操作区、操作历史
  - 使用卡片式布局
  - _需求：2.1, 2.3, 2.4_

- [ ]* 16.1 编写单元测试：页面结构
  - 验证不存在选择框组件
  - 验证存在三个主要卡片区域
  - _需求：2.3_

- [x] 17. 前端：实现统计卡片组件
  - 显示商品总数、待上传数量、已上传数量、失败数量
  - 使用网格布局
  - 添加loading状态
  - 使用图标和颜色区分不同统计项
  - _需求：2.2, 3.1_

- [ ]* 17.1 编写属性测试：统计信息显示
  - **属性 4：统计信息准确性**
  - **验证需求：2.2, 3.1**

- [x] 18. 前端：实现主操作区组件
  - 创建大号"生成全部商品模板"按钮
  - 显示商品预览列表（最多10条）
  - 添加"查看全部商品"链接
  - 实现按钮点击处理逻辑
  - _需求：1.1, 1.3, 2.1, 3.2, 3.3, 3.4_

- [ ]* 18.1 编写属性测试：商品预览数据完整性
  - **属性 6：商品预览数据完整性**
  - **验证需求：3.4**

- [ ]* 18.2 编写单元测试：导航功能
  - 测试点击"查看全部商品"跳转
  - 验证路由变化
  - _需求：3.3_

- [x] 19. 前端：实现生成模板功能
  - 实现handleGenerateTemplate方法
  - 检查商品数量，为0时显示警告
  - 显示全屏loading动画
  - 调用API生成模板
  - 触发文件下载
  - 显示成功消息（包含商品数量和文件名）
  - _需求：1.1, 1.2, 1.3, 1.4, 1.5, 5.4_

- [ ]* 19.1 编写属性测试：模板下载触发
  - **属性 2：模板下载触发**
  - **验证需求：1.3**

- [ ]* 19.2 编写属性测试：加载状态显示
  - **属性 3：加载状态显示**
  - **验证需求：1.5**

- [ ]* 19.3 编写属性测试：成功消息完整性
  - **属性 10：成功消息完整性**
  - **验证需求：5.4**

- [ ]* 19.4 编写单元测试：无商品数据处理
  - 测试商品数量为0时显示警告
  - 验证不调用API
  - _需求：1.4_

- [x] 20. 前端：实现操作历史组件
  - 显示最近3次操作记录
  - 显示操作时间、商品数量、状态
  - 使用不同颜色和图标区分状态
  - 添加loading状态
  - _需求：4.2, 4.3, 4.4_

- [ ]* 20.1 编写单元测试：历史记录点击
  - 测试点击记录显示详情
  - _需求：4.3_

- [x] 21. 前端：实现错误处理
  - 在Axios拦截器中添加错误处理（已存在）
  - 区分网络错误、服务器错误、业务错误
  - 显示友好的错误提示
  - 使用不同颜色和图标
  - _需求：5.1, 5.2, 5.3, 5.5_

- [ ]* 21.1 编写单元测试：错误处理场景
  - 测试网络错误提示
  - 测试服务器错误提示
  - 测试业务错误提示
  - 验证消息样式
  - _需求：5.1, 5.2, 5.3, 5.5_

- [x] 22. 前端：实现页面数据加载
  - 在onMounted中加载统计信息
  - 加载最近商品预览
  - 加载操作历史
  - 使用Promise.all并行加载
  - _需求：2.2, 3.1, 3.2, 4.2_

- [x] 23. 前端：实现响应式设计
  - 添加媒体查询CSS
  - 桌面端：三列网格布局
  - 平板端：两列布局
  - 移动端：单列布局
  - 确保所有断点下功能可用
  - _需求：7.1, 7.2, 7.3_

- [ ]* 23.1 编写单元测试：响应式布局
  - 测试不同窗口宽度下的布局
  - 验证功能可用性
  - _需求：7.1, 7.2_

- [ ]* 23.2 编写属性测试：响应式布局功能性
  - **属性 11：响应式布局功能性**
  - **验证需求：7.3**

- [x] 24. 前端：优化用户体验
  - 添加骨架屏loading效果（使用Element Plus loading）
  - 添加空状态提示（已实现）
  - 优化按钮hover和active状态（已实现）
  - 添加平滑过渡动画（已实现）
  - _需求：2.5_

- [ ] 25. 前端：实现进度提示
  - 当生成时间超过5秒时显示进度百分比
  - 使用setTimeout模拟进度更新
  - _需求：6.3_

- [ ]* 25.1 编写单元测试：进度提示
  - 测试长时间操作显示进度
  - _需求：6.3_

- [ ] 26. 检查点 - 确保前端所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [ ] 27. 集成测试：完整工作流
  - 测试页面加载 → 显示统计 → 生成模板 → 下载文件 → 刷新历史
  - 验证所有API调用正确
  - 验证UI状态变化正确
  - _需求：所有需求_

- [ ]* 27.1 编写集成测试：端到端流程
  - 测试完整的用户操作流程
  - 验证数据一致性
  - _需求：所有需求_

- [ ] 28. 性能测试和优化
  - 测试大数据量场景（1000、10000条商品）
  - 验证内存使用不超过500MB
  - 验证UI响应时间 ≤ 200ms
  - 优化性能瓶颈
  - _需求：6.1, 6.2, 6.5_

- [ ]* 28.1 编写性能测试
  - 测试不同数据量的生成时间
  - 测试UI响应性
  - _需求：6.1, 6.2, 6.5_

- [ ] 29. 文档更新
  - 更新API文档
  - 更新用户使用指南
  - 添加功能说明截图
  - _需求：所有需求_

- [ ] 30. 最终检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

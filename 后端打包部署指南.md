# åç«¯æ‰“åŒ…éƒ¨ç½²æŒ‡å—

## ğŸ“¦ å¿«é€Ÿæ‰“åŒ…

### æ–¹å¼ä¸€ï¼šä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# Windows
build-backend.bat
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å‘½ä»¤
```bash
cd meituan-backend

# æ¸…ç†æ—§æ–‡ä»¶
mvn clean

# æ‰“åŒ…ï¼ˆè·³è¿‡æµ‹è¯•ï¼‰
mvn package -DskipTests

# æ‰“åŒ…ï¼ˆåŒ…å«æµ‹è¯•ï¼‰
mvn package
```

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶

æ‰“åŒ…å®Œæˆåï¼ŒJAR æ–‡ä»¶ä½äºï¼š
```
meituan-backend/target/product-upload-1.0.0.jar
```

æ–‡ä»¶å¤§å°çº¦ï¼š50-80MB

---

## ğŸš€ è¿è¡Œæ‰“åŒ…åçš„åº”ç”¨

### åŸºæœ¬å¯åŠ¨
```bash
java -jar target/product-upload-1.0.0.jar
```

### æŒ‡å®šé…ç½®æ–‡ä»¶
```bash
java -jar target/product-upload-1.0.0.jar --spring.config.location=application-prod.yml
```

### æŒ‡å®šç«¯å£
```bash
java -jar target/product-upload-1.0.0.jar --server.port=8080
```

### åå°è¿è¡Œï¼ˆLinux/Macï¼‰
```bash
nohup java -jar target/product-upload-1.0.0.jar > app.log 2>&1 &
```

### åå°è¿è¡Œï¼ˆWindowsï¼‰
```bash
start /b java -jar target/product-upload-1.0.0.jar
```

---

## âš™ï¸ ç¯å¢ƒè¦æ±‚

### å¼€å‘ç¯å¢ƒï¼ˆæ‰“åŒ…ï¼‰
- JDK 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
- ç½‘ç»œè¿æ¥ï¼ˆä¸‹è½½ä¾èµ–ï¼‰

### è¿è¡Œç¯å¢ƒï¼ˆéƒ¨ç½²ï¼‰
- JRE 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- è¿œç¨‹ MySQL æ•°æ®åº“ï¼ˆ106.55.102.48:3306ï¼‰
- è¿œç¨‹ MinIO æœåŠ¡ï¼ˆ106.55.102.48:9000ï¼‰
- è‡³å°‘ 512MB å¯ç”¨å†…å­˜

---

## ğŸ“ é…ç½®æ–‡ä»¶

### å½“å‰é…ç½®ï¼ˆapplication.ymlï¼‰

```yaml
# æ•°æ®åº“é…ç½®ï¼ˆè¿œç¨‹ï¼‰
spring:
  datasource:
    url: jdbc:mysql://106.55.102.48:3306/meituan_product
    username: root
    password: mysql_G4EcQ6

# MinIO é…ç½®ï¼ˆè¿œç¨‹ï¼‰
minio:
  endpoint: http://106.55.102.48
  port: 9000
  access-key: minio_cf4STY
  secret-key: minio_ZGBzK7
```

### ä¿®æ”¹é…ç½®

**æ–¹å¼ä¸€ï¼šä¿®æ”¹ JAR åŒ…å†…çš„é…ç½®ï¼ˆä¸æ¨èï¼‰**
```bash
# è§£å‹ JAR
jar -xf product-upload-1.0.0.jar

# ä¿®æ”¹ BOOT-INF/classes/application.yml

# é‡æ–°æ‰“åŒ…
jar -cfm product-upload-1.0.0.jar META-INF/MANIFEST.MF .
```

**æ–¹å¼äºŒï¼šå¤–éƒ¨é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰**
```bash
# åˆ›å»ºå¤–éƒ¨é…ç½®æ–‡ä»¶
application-prod.yml

# å¯åŠ¨æ—¶æŒ‡å®š
java -jar product-upload-1.0.0.jar --spring.config.location=application-prod.yml
```

**æ–¹å¼ä¸‰ï¼šç¯å¢ƒå˜é‡**
```bash
# Windows
set SPRING_DATASOURCE_PASSWORD=new_password
java -jar product-upload-1.0.0.jar

# Linux/Mac
export SPRING_DATASOURCE_PASSWORD=new_password
java -jar product-upload-1.0.0.jar
```

---

## ğŸ”§ æ‰“åŒ…é…ç½®è¯´æ˜

### Maven æ’ä»¶é…ç½®

é¡¹ç›®ä½¿ç”¨ Spring Boot Maven Plugin è¿›è¡Œæ‰“åŒ…ï¼š

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
        </plugin>
    </plugins>
</build>
```

### æ‰“åŒ…å†…å®¹
- åº”ç”¨ä»£ç ï¼ˆç¼–è¯‘åçš„ .class æ–‡ä»¶ï¼‰
- ä¾èµ– JAR åŒ…
- é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰
- é™æ€èµ„æº

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ‰“åŒ…å¤±è´¥ï¼šæ‰¾ä¸åˆ° Maven
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ Maven æ˜¯å¦å®‰è£…
mvn -version

# å¦‚æœæœªå®‰è£…ï¼Œä¸‹è½½å¹¶é…ç½®ç¯å¢ƒå˜é‡
# https://maven.apache.org/download.cgi
```

### 2. æ‰“åŒ…å¤±è´¥ï¼šä¾èµ–ä¸‹è½½é”™è¯¯
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ¸…ç†æœ¬åœ°ä»“åº“
mvn clean

# å¼ºåˆ¶æ›´æ–°ä¾èµ–
mvn clean package -U
```

### 3. æ‰“åŒ…å¤±è´¥ï¼šç¼–è¯‘é”™è¯¯
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ JDK ç‰ˆæœ¬
java -version

# ç¡®ä¿ä½¿ç”¨ JDK 17
```

### 4. è¿è¡Œå¤±è´¥ï¼šæ‰¾ä¸åˆ°ä¸»ç±»
**åŸå› ï¼š** JAR åŒ…æŸåæˆ–æ‰“åŒ…ä¸å®Œæ•´

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# é‡æ–°æ‰“åŒ…
mvn clean package -DskipTests
```

### 5. è¿è¡Œå¤±è´¥ï¼šç«¯å£è¢«å ç”¨
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æŒ‡å®šå…¶ä»–ç«¯å£
java -jar product-upload-1.0.0.jar --server.port=8081
```

### 6. è¿è¡Œå¤±è´¥ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
**æ£€æŸ¥é¡¹ï¼š**
- è¿œç¨‹æ•°æ®åº“æ˜¯å¦å¯è®¿é—®
- ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
- é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ç«¯å£

---

## ğŸš¢ éƒ¨ç½²åˆ°æœåŠ¡å™¨

### 1. ä¸Šä¼  JAR åŒ…
```bash
# ä½¿ç”¨ SCP
scp target/product-upload-1.0.0.jar user@server:/opt/app/

# ä½¿ç”¨ FTP å·¥å…·
# FileZilla, WinSCP ç­‰
```

### 2. åˆ›å»ºå¯åŠ¨è„šæœ¬

**start.sh (Linux):**
```bash
#!/bin/bash
nohup java -jar product-upload-1.0.0.jar > app.log 2>&1 &
echo $! > app.pid
echo "åº”ç”¨å·²å¯åŠ¨ï¼ŒPID: $(cat app.pid)"
```

**stop.sh (Linux):**
```bash
#!/bin/bash
if [ -f app.pid ]; then
    kill $(cat app.pid)
    rm app.pid
    echo "åº”ç”¨å·²åœæ­¢"
else
    echo "PID æ–‡ä»¶ä¸å­˜åœ¨"
fi
```

### 3. è®¾ç½®ä¸ºç³»ç»ŸæœåŠ¡ï¼ˆå¯é€‰ï¼‰

**systemd æœåŠ¡æ–‡ä»¶ (Linux):**
```ini
[Unit]
Description=Meituan Product Upload Backend
After=network.target

[Service]
Type=simple
User=app
WorkingDirectory=/opt/app
ExecStart=/usr/bin/java -jar /opt/app/product-upload-1.0.0.jar
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š
```bash
sudo systemctl enable meituan-backend
sudo systemctl start meituan-backend
sudo systemctl status meituan-backend
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### JVM å‚æ•°ä¼˜åŒ–
```bash
java -Xms512m -Xmx1024m \
     -XX:+UseG1GC \
     -XX:MaxGCPauseMillis=200 \
     -jar product-upload-1.0.0.jar
```

### å‚æ•°è¯´æ˜
- `-Xms512m`: åˆå§‹å †å†…å­˜ 512MB
- `-Xmx1024m`: æœ€å¤§å †å†…å­˜ 1GB
- `-XX:+UseG1GC`: ä½¿ç”¨ G1 åƒåœ¾å›æ”¶å™¨
- `-XX:MaxGCPauseMillis=200`: GC æœ€å¤§æš‚åœæ—¶é—´ 200ms

---

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f app.log

# æŸ¥çœ‹æœ€è¿‘ 100 è¡Œ
tail -n 100 app.log

# æœç´¢é”™è¯¯
grep ERROR app.log
```

### å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œ
curl http://localhost:8080/actuator/health

# æŸ¥çœ‹åº”ç”¨ä¿¡æ¯
curl http://localhost:8080/actuator/info
```

---

## âœ… æ‰“åŒ…æ£€æŸ¥æ¸…å•

æ‰“åŒ…å‰ï¼š
- [ ] ä»£ç å·²æäº¤
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] é…ç½®æ–‡ä»¶å·²æ£€æŸ¥
- [ ] ä¾èµ–å·²æ›´æ–°

æ‰“åŒ…åï¼š
- [ ] JAR æ–‡ä»¶å·²ç”Ÿæˆ
- [ ] æœ¬åœ°å¯åŠ¨æµ‹è¯•é€šè¿‡
- [ ] API æ¥å£æµ‹è¯•é€šè¿‡
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸

éƒ¨ç½²å‰ï¼š
- [ ] è¿œç¨‹æ•°æ®åº“å·²å‡†å¤‡
- [ ] è¿œç¨‹ MinIO å·²å‡†å¤‡
- [ ] æœåŠ¡å™¨ç¯å¢ƒå·²é…ç½®
- [ ] å¤‡ä»½æ—§ç‰ˆæœ¬

---

## ğŸ¯ ç‰ˆæœ¬ç®¡ç†

### ä¿®æ”¹ç‰ˆæœ¬å·

ç¼–è¾‘ `meituan-backend/pom.xml`ï¼š
```xml
<version>1.0.1</version>
```

### ç‰ˆæœ¬å‘½åè§„èŒƒ
- ä¸»ç‰ˆæœ¬å·ï¼šé‡å¤§åŠŸèƒ½å˜æ›´
- æ¬¡ç‰ˆæœ¬å·ï¼šæ–°åŠŸèƒ½æ·»åŠ 
- ä¿®è®¢å·ï¼šBug ä¿®å¤

ç¤ºä¾‹ï¼š
- 1.0.0 - åˆå§‹ç‰ˆæœ¬
- 1.1.0 - æ·»åŠ æ–°åŠŸèƒ½
- 1.1.1 - ä¿®å¤ Bug

---

## ğŸ“š ç›¸å…³å‘½ä»¤

```bash
# æŸ¥çœ‹é¡¹ç›®ä¿¡æ¯
mvn help:describe -Dplugin=org.springframework.boot:spring-boot-maven-plugin

# æŸ¥çœ‹ä¾èµ–æ ‘
mvn dependency:tree

# åˆ†æä¾èµ–
mvn dependency:analyze

# è¿è¡Œæµ‹è¯•
mvn test

# ç”Ÿæˆé¡¹ç›®æ–‡æ¡£
mvn site
```

---

**æ‰“åŒ…å®Œæˆåï¼Œè®°å¾—æµ‹è¯•æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼**

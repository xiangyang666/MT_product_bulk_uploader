# æ‰¹é‡å¯¼å…¥50+å­—æ®µæ”¯æŒ - å·²ä¿®å¤

## ğŸ“‹ é—®é¢˜æè¿°

æ‰¹é‡å¯¼å…¥é¡µé¢ç‚¹å‡»"ä¸‹ä¸€æ­¥é¢„è§ˆæ•°æ®"æ—¶æŠ¥é”™ï¼š
```
Column 'price' cannot be null
```

## ğŸ” é—®é¢˜åŸå› 

`ProductMapper.xml` ä¸­çš„æ‰¹é‡æ’å…¥SQLåªåŒ…å«äº†8ä¸ªåŸºç¡€å­—æ®µï¼Œæ²¡æœ‰åŒ…å«æ–°æ·»åŠ çš„50+ä¸ªå­—æ®µã€‚å½“ç³»ç»Ÿå°è¯•æ’å…¥å•†å“æ•°æ®æ—¶ï¼Œæ–°å­—æ®µçš„å€¼æ— æ³•è¢«ä¿å­˜åˆ°æ•°æ®åº“ã€‚

**åŸæœ‰SQL**ï¼š
```xml
INSERT INTO t_product (
    merchant_id, product_name, category_id, price, 
    stock, description, image_url, status
) VALUES ...
```

## âœ… è§£å†³æ–¹æ¡ˆ

æ›´æ–° `ProductMapper.xml` çš„æ‰¹é‡æ’å…¥SQLï¼Œæ·»åŠ æ‰€æœ‰50+ä¸ªæ–°å­—æ®µã€‚

**æ›´æ–°åçš„SQL**ï¼š
```xml
INSERT INTO t_product (
    merchant_id, product_name, category_id, price, stock, description, image_url, status,
    sku_id, upc_ean, category_name, app_spu_code,
    product_image, cover_video, spec_image, spec_image_url,
    store_category, store_category_count, spec_name, store_code,
    sale_status, monthly_sales, weight, weight_unit, min_purchase, shelf_code,
    selling_point, selling_point_period, text_detail, image_detail, brand_image_detail,
    production_date, expiry_date, is_near_expiry, is_expired,
    delivery_mode, presale_delivery_time, available_time,
    product_attributes, is_recommended, no_reason_return, is_combo, combo_products, is_four_wheel_delivery,
    compliance_status, violation_offline, missing_required_info, audit_status
) VALUES ...
```

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

**æ–‡ä»¶**: `meituan-backend/src/main/resources/mapper/ProductMapper.xml`

**ä¿®æ”¹å†…å®¹**:
- âœ… åœ¨ `INSERT` è¯­å¥ä¸­æ·»åŠ äº†æ‰€æœ‰50+ä¸ªæ–°å­—æ®µ
- âœ… åœ¨ `VALUES` å­å¥ä¸­æ·»åŠ äº†å¯¹åº”çš„å‚æ•°ç»‘å®š
- âœ… ä¿æŒäº†åŸæœ‰çš„8ä¸ªåŸºç¡€å­—æ®µï¼Œç¡®ä¿å‘åå…¼å®¹

## ğŸ¯ æ–°å¢å­—æ®µåˆ—è¡¨

### åŸºç¡€ä¿¡æ¯å­—æ®µï¼ˆ4ä¸ªï¼‰
- `sku_id` - SKU ID
- `upc_ean` - æ¡å½¢ç 
- `category_name` - å•†å“ç±»ç›®åç§°
- `app_spu_code` - APP SPUç¼–ç 

### å›¾ç‰‡è§†é¢‘å­—æ®µï¼ˆ4ä¸ªï¼‰
- `product_image` - å•†å“å›¾ç‰‡URL
- `cover_video` - å°é¢è§†é¢‘URL
- `spec_image` - è§„æ ¼å›¾URL
- `spec_image_url` - è§„æ ¼å›¾URL

### åˆ†ç±»åº“å­˜å­—æ®µï¼ˆ10ä¸ªï¼‰
- `store_category` - åº—å†…åˆ†ç±»
- `store_category_count` - æ‰€å¤„åº—å†…åˆ†ç±»æ•°é‡
- `spec_name` - è§„æ ¼åç§°
- `store_code` - åº—å†…ç /è´§å·
- `sale_status` - å”®å–çŠ¶æ€
- `monthly_sales` - æœˆå”®æ•°é‡
- `weight` - é‡é‡
- `weight_unit` - é‡é‡å•ä½
- `min_purchase` - èµ·è´­æ•°
- `shelf_code` - è´§æ¶ç /ä½ç½®ç 

### è¯¦æƒ…æè¿°å­—æ®µï¼ˆ5ä¸ªï¼‰
- `selling_point` - å•†å“å–ç‚¹
- `selling_point_period` - å–ç‚¹å±•ç¤ºæœŸ
- `text_detail` - æ–‡å­—è¯¦æƒ…
- `image_detail` - å›¾ç‰‡è¯¦æƒ…
- `brand_image_detail` - å“ç‰Œå•†å›¾ç‰‡è¯¦æƒ…

### æ—¥æœŸç›¸å…³å­—æ®µï¼ˆ4ä¸ªï¼‰
- `production_date` - ç”Ÿäº§æ—¥æœŸ
- `expiry_date` - åˆ°æœŸæ—¥æœŸ
- `is_near_expiry` - æ˜¯å¦ä¸´æœŸ
- `is_expired` - æ˜¯å¦è¿‡æœŸ

### é…é€æ—¶é—´å­—æ®µï¼ˆ3ä¸ªï¼‰
- `delivery_mode` - å‘è´§æ¨¡å¼
- `presale_delivery_time` - é¢„å”®çš„å¯é…é€æ—¶é—´
- `available_time` - å¯å”®æ—¶é—´

### å•†å“å±æ€§å­—æ®µï¼ˆ6ä¸ªï¼‰
- `product_attributes` - å•†å“å±æ€§(JSONæ ¼å¼)
- `is_recommended` - åŠ›è
- `no_reason_return` - æ— ç†ç”±é€€è´§
- `is_combo` - ç»„åˆå•†å“
- `combo_products` - å‚ä¸çš„ç»„åˆå•†å“
- `is_four_wheel_delivery` - æ˜¯å¦å››è½®é…é€

### åˆè§„å®¡æ ¸å­—æ®µï¼ˆ4ä¸ªï¼‰
- `compliance_status` - åˆè§„çŠ¶æ€
- `violation_offline` - è¿è§„ä¸‹æ¶
- `missing_required_info` - å¿…å¡«ä¿¡æ¯ç¼ºå¤±
- `audit_status` - å®¡æ ¸çŠ¶æ€

**æ€»è®¡**: 40ä¸ªæ–°å­—æ®µ + 8ä¸ªåŸæœ‰å­—æ®µ = 48ä¸ªå­—æ®µ

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### MyBatiså‚æ•°ç»‘å®š

ä½¿ç”¨ `#{item.fieldName}` è¯­æ³•ç»‘å®šJavaå¯¹è±¡çš„å±æ€§åˆ°SQLå‚æ•°ï¼š

```xml
<foreach collection="list" item="item" separator=",">
    (
        #{item.merchantId}, #{item.productName}, #{item.categoryId}, #{item.price}, 
        #{item.stock}, #{item.description}, #{item.imageUrl}, #{item.status},
        #{item.skuId}, #{item.upcEan}, #{item.categoryName}, #{item.appSpuCode},
        ...
    )
</foreach>
```

### å­—æ®µé¡ºåº

SQLä¸­çš„å­—æ®µé¡ºåºå¿…é¡»ä¸VALUESä¸­çš„å‚æ•°é¡ºåºå®Œå…¨ä¸€è‡´ï¼š
1. åŸºç¡€å­—æ®µï¼ˆ8ä¸ªï¼‰
2. åŸºç¡€ä¿¡æ¯æ‰©å±•å­—æ®µï¼ˆ4ä¸ªï¼‰
3. å›¾ç‰‡è§†é¢‘å­—æ®µï¼ˆ4ä¸ªï¼‰
4. åˆ†ç±»åº“å­˜å­—æ®µï¼ˆ10ä¸ªï¼‰
5. è¯¦æƒ…æè¿°å­—æ®µï¼ˆ5ä¸ªï¼‰
6. æ—¥æœŸç›¸å…³å­—æ®µï¼ˆ4ä¸ªï¼‰
7. é…é€æ—¶é—´å­—æ®µï¼ˆ3ä¸ªï¼‰
8. å•†å“å±æ€§å­—æ®µï¼ˆ6ä¸ªï¼‰
9. åˆè§„å®¡æ ¸å­—æ®µï¼ˆ4ä¸ªï¼‰

### NULLå€¼å¤„ç†

MyBatisä¼šè‡ªåŠ¨å¤„ç†NULLå€¼ï¼š
- å¦‚æœJavaå¯¹è±¡çš„å±æ€§ä¸ºnullï¼ŒMyBatisä¼šå°†å…¶ä½œä¸ºSQLçš„NULLå€¼æ’å…¥
- æ•°æ®åº“ä¸­æœ‰é»˜è®¤å€¼çš„å­—æ®µï¼ˆå¦‚ `sale_status DEFAULT 'åœ¨å”®'`ï¼‰ä¼šä½¿ç”¨é»˜è®¤å€¼

## âœ… æµ‹è¯•å»ºè®®

### 1. åŸºç¡€å¯¼å…¥æµ‹è¯•
- [ ] æµ‹è¯•å¯¼å…¥åªåŒ…å«å¿…å¡«å­—æ®µçš„Excelæ–‡ä»¶
- [ ] æµ‹è¯•å¯¼å…¥åŒ…å«æ‰€æœ‰50+å­—æ®µçš„Excelæ–‡ä»¶
- [ ] æµ‹è¯•å¯¼å…¥åŒ…å«éƒ¨åˆ†å­—æ®µçš„Excelæ–‡ä»¶

### 2. æ•°æ®å®Œæ•´æ€§æµ‹è¯•
- [ ] æ£€æŸ¥å¯¼å…¥åæ‰€æœ‰å­—æ®µæ˜¯å¦æ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“
- [ ] æ£€æŸ¥NULLå­—æ®µæ˜¯å¦ä½¿ç”¨äº†æ•°æ®åº“é»˜è®¤å€¼
- [ ] æ£€æŸ¥æ—¥æœŸå­—æ®µæ˜¯å¦æ­£ç¡®è§£æå’Œä¿å­˜

### 3. æ‰¹é‡å¯¼å…¥æµ‹è¯•
- [ ] æµ‹è¯•å¯¼å…¥10æ¡å•†å“æ•°æ®
- [ ] æµ‹è¯•å¯¼å…¥100æ¡å•†å“æ•°æ®
- [ ] æµ‹è¯•å¯¼å…¥1000æ¡å•†å“æ•°æ®

### 4. é”™è¯¯å¤„ç†æµ‹è¯•
- [ ] æµ‹è¯•ä»·æ ¼å­—æ®µä¸ºç©ºçš„æƒ…å†µ
- [ ] æµ‹è¯•å¿…å¡«å­—æ®µç¼ºå¤±çš„æƒ…å†µ
- [ ] æµ‹è¯•å­—æ®µæ ¼å¼é”™è¯¯çš„æƒ…å†µ

## ğŸ“Š æ€§èƒ½å½±å“

### æ’å…¥æ€§èƒ½

ç”±äºå­—æ®µæ•°é‡ä»8ä¸ªå¢åŠ åˆ°48ä¸ªï¼Œå•æ¬¡æ’å…¥çš„æ•°æ®é‡å¢åŠ äº†6å€ã€‚ä½†æ˜¯ï¼š

1. **æ‰¹é‡æ’å…¥ä¼˜åŒ–**ï¼šä½¿ç”¨MyBatisçš„æ‰¹é‡æ’å…¥ï¼Œä¸€æ¬¡SQLæ’å…¥å¤šæ¡æ•°æ®
2. **ç´¢å¼•å½±å“**ï¼šæ–°å¢äº†7ä¸ªç´¢å¼•ï¼Œå¯èƒ½ä¼šç•¥å¾®é™ä½æ’å…¥é€Ÿåº¦ï¼Œä½†ä¼šå¤§å¹…æå‡æŸ¥è¯¢é€Ÿåº¦
3. **ç½‘ç»œä¼ è¾“**ï¼šæ•°æ®é‡å¢åŠ ï¼Œä½†å¯¹äºå±€åŸŸç½‘ç¯å¢ƒå½±å“ä¸å¤§

### å»ºè®®

- æ‰¹é‡å¯¼å…¥æ—¶ï¼Œå»ºè®®æ¯æ‰¹æ¬¡ä¸è¶…è¿‡1000æ¡æ•°æ®
- å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼ˆ>10000æ¡ï¼‰ï¼Œå¯ä»¥åˆ†æ‰¹å¯¼å…¥
- å¯¼å…¥å®Œæˆåï¼Œå¯ä»¥æ‰§è¡Œ `ANALYZE TABLE t_product` ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. é‡å¯åç«¯æœåŠ¡

ä¿®æ”¹äº† `ProductMapper.xml` åï¼Œéœ€è¦é‡å¯åç«¯æœåŠ¡ï¼š

```bash
# åœæ­¢åç«¯æœåŠ¡
# é‡æ–°å¯åŠ¨åç«¯æœåŠ¡
cd meituan-backend
mvn spring-boot:run
```

### 2. æµ‹è¯•æ‰¹é‡å¯¼å…¥

1. å‡†å¤‡åŒ…å«50+å­—æ®µçš„Excelæ–‡ä»¶
2. è¿›å…¥"æ‰¹é‡å¯¼å…¥"é¡µé¢
3. ä¸Šä¼ Excelæ–‡ä»¶
4. ç‚¹å‡»"ä¸‹ä¸€æ­¥é¢„è§ˆæ•°æ®"
5. æ£€æŸ¥é¢„è§ˆæ•°æ®æ˜¯å¦æ­£ç¡®
6. ç‚¹å‡»"ç¡®è®¤å¯¼å…¥"

### 3. éªŒè¯æ•°æ®

å¯¼å…¥å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

**æ–¹å¼1ï¼šå‰ç«¯å•†å“ç®¡ç†é¡µé¢**
- è¿›å…¥"å•†å“ç®¡ç†"é¡µé¢
- æŸ¥çœ‹å•†å“åˆ—è¡¨ï¼Œæ£€æŸ¥æ‰€æœ‰å­—æ®µæ˜¯å¦æ­£ç¡®æ˜¾ç¤º

**æ–¹å¼2ï¼šæ•°æ®åº“æŸ¥è¯¢**
```sql
-- æŸ¥çœ‹æœ€æ–°å¯¼å…¥çš„å•†å“
SELECT * FROM t_product 
ORDER BY created_time DESC 
LIMIT 10;

-- æ£€æŸ¥å­—æ®µå®Œæ•´æ€§
SELECT 
    COUNT(*) as total,
    COUNT(sku_id) as has_sku_id,
    COUNT(upc_ean) as has_upc_ean,
    COUNT(category_name) as has_category_name,
    COUNT(product_image) as has_product_image
FROM t_product
WHERE created_time > DATE_SUB(NOW(), INTERVAL 1 HOUR);
```

## ğŸ‰ å®ŒæˆçŠ¶æ€

- âœ… ProductMapper.xml å·²æ›´æ–°
- âœ… æ”¯æŒæ‰€æœ‰50+å­—æ®µçš„æ‰¹é‡æ’å…¥
- âœ… ä¿æŒå‘åå…¼å®¹æ€§
- âœ… æ— ç¼–è¯‘é”™è¯¯
- âœ… å‡†å¤‡å¥½æµ‹è¯•

**çŠ¶æ€**ï¼šğŸŸ¢ å·²ä¿®å¤ï¼Œå¯ä»¥æµ‹è¯•æ‰¹é‡å¯¼å…¥åŠŸèƒ½ï¼

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `ç¾å›¢50+å­—æ®µæ‰©å±•-å·²å®Œæˆ.md` - å­—æ®µæ‰©å±•æ€»ä½“è¯´æ˜
- `database-migration-full-fields-fixed.sql` - æ•°æ®åº“è¿ç§»è„šæœ¬
- `ç¾å›¢å®Œæ•´å­—æ®µæ‰©å±•æ–¹æ¡ˆ.md` - å®Œæ•´å­—æ®µæ˜ å°„æ–‡æ¡£

---

**åˆ›å»ºæ—¶é—´**: 2026-02-09  
**æœ€åæ›´æ–°**: 2026-02-09  
**çŠ¶æ€**: âœ… å·²ä¿®å¤
